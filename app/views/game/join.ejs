<% include ../partials/header.ejs %>

<div class="jumbotron sub">
	<div class="container">
		<h1>Join a Game</h1>
	</div>
	
</div>

<div class="container">

	<% if (games.open.length > 0) { %>
		<h3>Open Games</h3>
		<div class="table-responsive">
			<table class="table table-bordered">
				<thead>
					<tr>
						<th>Creator</th>
						<th>Created</th>
						<th>Starting Chips</th>
						<th>Big Blind</th>
						<th>Small Blind</th>
						<th>Level</th>
						<th>Timer</th>
						<th>Table</th>
					</tr>
				</thead>

				<tbody>
					<% for (var i = 0; i < games.open.length; i++) { %>
						<tr>
							<td>
								<a href="/user/<%= games.open[i].players[0].name %>"><span class="glyphicon glyphicon-user"></span> <%= games.open[i].players[0].name %></a>
							</td>
							<td>
								<%= moment(games.open[i].created).format("MMM D, YYYY h:mma ZZ") %>
								<span class="label label-default"><em><%= moment().from(moment(games.open[i].created), true) %> ago</em></span> 
							</td>
							<td>
								<%= games.open[i].settings.chipStack %> 
							</td>
							<td>
								<%= games.open[i].settings.bigBlind %>
							</td>
							
							<td>
								<%= games.open[i].settings.smallBlind %>
							</td>
							<td>
								<% if (games.open[i].settings.timer === 0) { %>
									&infin;
								<% } else { %>
									<%= games.open[i].settings.timer %> min
								<% } %>
							</td>
							<td>
								<% if (games.open[i].settings.level === 0) { %>
									&infin;
								<% } else { %>
									<%= games.open[i].settings.level %> min
								<% } %>
							</td>
							<td>
								<a href="/game/play/<%= games.open[i].id %>" class="btn btn-primary btn-md btn-block"><span class="glyphicon glyphicon-new-window"></span> Join</a>
							</td>
						</tr>
					<% } %>
				</tbody>
			</table>
		</div>
	<% } else { %>
		<h3>Sorry!</h3>
		<p>It doesn't look like there are any open tables right now.</p>
		<p>You can create a <a href="/game/new %>" class="btn btn-sm btn-primary">New Game</a> instead, and either wait for someone to join or invite a player.</p>
	<% } %>

</div>

<% include ../partials/footer.ejs %>